# parallel_programming

java.util.concurrent.locks.Lock и java.util.concurrent.locks.ReentrantLock са класове от пакета java.util.concurrent.locks, които могат да се използват в многонишковото програмиране.


Първият ни Java клас е озаглавен public class CardOperationsClass с три access modifier-а:
- private double balance - представя текущия баланс на картата
- private double maximalOverdraft - максималния позволен оувърдрафт
- private final Lock lock - private поле, което представлява lock object за синхронизиране.

Класът е съставен от 4 метода:
-public void setMaximalOverdraft(double maximalOverdraft) - преизчислява стойността на оувърдрафта в негативната стойност на зададената първоначално стойност.

-public CardOperationsClass(double initialBalance) - public конструктор, който инициализира баланса и максималния оувърдрафт

-public void depositIntoCard(double amount) - Този метод депозира  сума пари в банковата карта. С началото на метода той бива заключен, за да гарантира thread-safety. Преди депозита той проверява дали сумата е по-голяма или равна на 10000. Ако сумата е по-малка от 10 000, депозира парите отпечатва съобщение, показващо новия баланс. Накрая отключва lock обектa.

-public void withdrawFromCard(double amount) - Този метод тегли дадена сума пари от банковата карта. Заключва lock обекта и преди тегленето проверява дали в картата има достатъчно наличност. Ако е така, той , изтегля парите от картата и принтира новия баланс. Ако тегленето постави картата в овърдрафт (наличност по-малка от 0, но по-голямо от -maximalOverdraft(-100)), се начисляват 5% данък върху сумата на овърдрафта и отпечатва съобщение, показващо новия баланс. Ако тегленето постави картата под -maximalOverdraft, тя отпечатва съобщение, че няма достатъчно баланс. Накрая отключва lock обекта.

Класът CardPaymentApp, има един основен метод.

Основният метод създава инстанция на CardOperationsClass, който отговаря за извършването на операции върху картата. Този клас се инициализира с начален баланс от 100.0.

След това основният метод създава шест нишки: три нишки за депозит и три нишки за теглене. Всяка нишка за депозит извиква метода depositIntoCard на обекта card, който добавя определената сума към баланса на картата. По същия начин всяка нишка за теглене извиква метода drawFromCard на обекта карта, който изважда определената сума от баланса на картата.


След създаването на всичките шест нишки, основният метод ги стартира в определен ред, като използва метода start.


